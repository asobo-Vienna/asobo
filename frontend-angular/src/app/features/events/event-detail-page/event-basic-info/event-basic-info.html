<form [formGroup]="editEventForm" [class.editing]="isEditing()">
  <div class="mb-3">
    <div class="row">
      <div class="col" id="event-basic-info-container">
        <div class="d-flex flex-wrap justify-content-between">
            <textarea
              type="text"
              id="event-title"
              class="event-title-textarea fw-bold"
              formControlName="title"
              cdkTextareaAutosize
              cdkAutosizeMinRows="1"
              [readonly]="!isEditing()"
              aria-label="Event title"
            ></textarea>

          @if (isEditing()) {
            <p-datepicker
              formControlName="date"
              name="date"
              [showIcon]="true"
              dateFormat="dd MM yy at"
              [showTime]="true"
              hourFormat="12"
              [readonlyInput]="!isEditing()"
              ariaLabel="Event date and time"
            >
            </p-datepicker>
          }

          @if (!isEditing()) {
            <div id="event-date" class="date-font-color">
              {{ event()?.date | date : 'EEE, MMMM d, y' }}
              <div id="event-time" class="date-font-color event-time">
                {{ event()?.date | date : 'h:mm a' }}
              </div>
            </div>
          }
        </div>

        <div class="d-flex justify-content-between">
          <input
            type="text"
            id="event-location"
            class="date-font-color small flex-grow-1 mt-3"
            formControlName="location"
            pInputText
            [readonly]="!isEditing()"
            aria-label="Event location"
          />
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <div id="event-description-container" class="mb-3 p-3 infobox">
          <textarea
            formControlName="description"
            cdkTextareaAutosize
            cdkAutosizeMinRows="3"
            class="event-description-textarea"
            [readonly]="!isEditing()"
            aria-label="Event description"
          ></textarea>
      </div>

      @if (isAdminOrEventAdmin() && !isEventInThePast()) {
        <div class="d-flex align-items-center edit-button-div mb-3">
          <!-- Left: toggle -->
          <div class="flex-fill">
            @if (isEditing()) {
              <div class="d-flex align-items-center gap-2">
                <p-toggleswitch formControlName="isPrivateEvent"/>
                <span class="small">{{ editEventForm.get('isPrivateEvent')?.value ? 'Private' : 'Public' }}</span>
              </div>
            }
          </div>
          <!-- Center: confirm/cancel -->
          <div class="flex-fill d-flex justify-content-center gap-2">
            @if (isEditing()) {
              <button type="button" class="btn btn-link p-0 me-1 clickable" aria-label="Save changes" (click)="onSubmit()">
                <i class="pi pi-check clickable" aria-hidden="true"></i>
              </button>
              <button type="button" class="btn btn-link p-0 clickable" aria-label="Cancel editing" (click)="cancelEdit()">
                 <i class="pi pi-times clickable" aria-hidden="true"></i>
              </button>
            }
          </div>
          <!-- Right: edit/delete -->
          <div class="flex-fill d-flex justify-content-end gap-2">
            <button type="button" class="btn btn-link p-0" aria-label="Edit event" (click)="enterEdit()">
                <i class="pi pi-pen-to-square clickable" aria-hidden="true"></i>
            </button>
            <button type="button" class="btn btn-link p-0" aria-label="Delete event" (click)="onDelete()">
                <i class="pi pi-trash clickable" aria-hidden="true"></i>
            </button>
          </div>
        </div>
      }


    </div>
  </div>
  <!--<div class="col-md-4"><-- spacer </div>-->
</form>
