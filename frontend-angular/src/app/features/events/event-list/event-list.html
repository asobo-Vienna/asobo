@if (router.url.includes('events')) {
  <h1 class="text-primary component">All {{ authService.isLoggedIn() ? '' : 'Public' }} Events</h1>
}

<div class="event-search-bar d-flex justify-content-center mb-3">
  <app-global-search
    searchType="simple"
    (searchOutput)="onSearch($event)">
  </app-global-search>
</div>

@if (loading()) {
  <app-spinner size="lg"/>
} @else {
  <div class="sort-container d-flex justify-content-center">
    <div class="sort-label me-3 mt-1">Sort by</div>
    <div class="sort-controls mb-5 d-flex gap-2">
      <button
        class="btn btn-sm btn-outline-secondary"
        (click)="onSort('date')"
        [class.active]="sortField() === 'date'"
        [attr.aria-pressed]="sortField() === 'date'"
        [attr.aria-label]="'Sort by date ' + getSortIcon('date')">
        Date {{ getSortIcon('date') }}
      </button>

      <button
        class="btn btn-sm btn-outline-secondary"
        (click)="onSort('title')"
        [class.active]="sortField() === 'title'"
        [attr.aria-pressed]="sortField() === 'title'"
        [attr.aria-label]="'Sort by title ' + getSortIcon('title')">
        Title {{ getSortIcon('title') }}
      </button>

      <button
        class="btn btn-sm btn-outline-secondary"
        (click)="onSort('location')"
        [class.active]="sortField() === 'location'"
        [attr.aria-pressed]="sortField() === 'location'"
        [attr.aria-label]="'Sort by location ' + getSortIcon('location')">
        Location {{ getSortIcon('location') }}
      </button>

      @if (authService.isLoggedIn()) {
        <button
          class="btn btn-sm btn-outline-secondary"
          (click)="onSort('isPrivateEvent')"
          [class.active]="sortField() === 'isPrivateEvent'"
          [attr.aria-pressed]="sortField() === 'isPrivateEvent'"
          [attr.aria-label]="'Sort by visibility ' + getSortIcon('isPrivateEvent')">
          Visibility {{ getSortIcon('isPrivateEvent') }}
        </button>
      }
    </div>
  </div>

  <ul id="event-list" class="list-unstyled">
    @for (event of events(); track event.id) {
      <li>
        <app-event-card
          [event]="event"
          (eventDeleted)="deleteEvent($event)"
        >
        </app-event-card>
      </li>
    } @empty {
      <li class="text-center text-gray-500 py-4">No events found</li>
    }
  </ul>
}
