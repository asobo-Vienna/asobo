<div class="fw-bold">Photos & Videos</div>
<div class="mt-2 media-thumbnail-container">

  @for (item of mediaItems; track item.id; let i = $index) {
    <div class="single-media-container"
         role="button"
         tabindex="0"
         (click)="openCarousel(i)"
         [attr.aria-label]="'View ' + item.caption">

      @if (MediaUtilService.isVideo(item.mediumURI)) {
        <video [src]="UrlUtilService.getMediaUrl(item.mediumURI)" aria-label="{{ item.caption }}"></video>
      } @else {
        <img [src]="UrlUtilService.getMediaUrl(item.mediumURI)"
             alt="{{ item.caption }}">
      }

      @if (accessControlService.hasAdminAccess() || accessControlService.getCurrentUser()?.id === item.creatorId
      || (this.accessControlService.isCurrentUserEventAdmin(this.event()))) {
        <button class="btn btn-link p-0 delete-media-button"
                aria-label="Delete media"
                (click)="mediaDeleted.emit(item); $event.stopPropagation();">
          <i class="pi pi-times-circle clickable" aria-hidden="true"></i>
        </button>
      }
    </div>
  }

  <div class="single-media-container">
    <button class="single-media-container add-media-button" (click)="fileInput.click()" aria-label="Add photo or video">
      +
      <input
        #fileInput
        type="file"
        accept="image/*,video/*"
        hidden
        (change)="onFileSelected($event)"
      />
    </button>
  </div>
</div>

<!-- CAROUSEL MODAL -->
@if (showCarousel) {
  <div class="carousel-overlay" (click)="closeCarousel()">
    <div class="carousel-content" (click)="$event.stopPropagation()">
      <p-carousel [value]="mediaItems.toArray()"
                  [numVisible]="1"
                  [numScroll]="1"
                  [circular]="true"
                  [page]="activeSlideIndex">
        <ng-template let-item pTemplate="item">
          <div class="media-slide">
            @if (MediaUtilService.isVideo(item.mediumURI)) {
              <video [src]="UrlUtilService.getMediaUrl(item.mediumURI)" controls aria-label="{{ item.caption }}"></video>
            } @else {
              <img [src]="UrlUtilService.getMediaUrl(item.mediumURI)" alt="{{ item.caption }}"/>
            }
          </div>
        </ng-template>
      </p-carousel>
    </div>
  </div>
}






